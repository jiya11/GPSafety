# GPSafety üìå
GPSafety is a Geographic Information System (GIS) project developed in C++ that also highlights crime hotspots across Toronto. It is built off the OpenStreetMap Database via their OSMDatabaseAPI.h and StreetsDatabaseAPI.h APIs. To enhance its functionality with real-time data, GPSafety also integrates information from the Toronto Police Service, made accessible via the tpscalls.live API developed by R. Durant [(R. Durant, ‚ÄúTpscalls.live,‚Äù https://www.tpscalls.live/, accessed Mar. 10, 2025)]. Unlike conventional navigation tools that focus on the fastest routes, GPSafety prioritizes user safety.

![GPSafety](https://github.com/user-attachments/assets/c467b640-9c80-4920-adc8-99503e42121e)

## üîç Features
The project was developed in four milestone phases, each building on the previous:
- **Milestone 1: Data Structures**
  - Built efficient map-loading functions from OpenStreetMap data.
- **Milestone 2: Graphics**
  - Designed an interactive user interface using GTK and UofT's EZGL renderer, with a focus on simplicity, clarity and quick access to safety features.
    - Colour-coded elements and dark mode support for improved visibility
      <img src="https://github.com/user-attachments/assets/543b183b-15d0-42e9-bf01-913d6232987e" width="500"/>

    - Customized icons to enhance visual clarity and user recognition
      
      <img src="https://github.com/user-attachments/assets/fb3952c7-b0ac-43f4-98ef-83ccefa0a88a" width="250"/>

    - Point of interest (POI) buttons for quick access to notable locations
      <img src="https://github.com/user-attachments/assets/d2e06894-c03e-46e5-a5c5-010a70a15e8e" width="500"/>

    - Hamburger menu for zooming, switching cities, and accessing the help menu
      <img src="https://github.com/user-attachments/assets/f35633eb-20a6-4447-932e-63b7398c0327" width="500"/>

    - Ability to switch between different cities
      <img src="https://github.com/user-attachments/assets/8efbddb6-60ee-4e0d-b2f1-e7d7ed94c065" width="500"/>

    - Search bar with autocomplete for streets, intersections, and routes

      <img src="https://github.com/user-attachments/assets/3ca572ed-b47d-4bdb-927c-a1405137afa9" width="500" style="display:inline-block; margin-right:5px;" />  <img src="https://github.com/user-attachments/assets/66d43dfe-46dc-4dda-b564-a84968a5c139" width="500" style="display:inline-block; margin-right: 5px;" />  <img src="https://github.com/user-attachments/assets/f72b6f73-d0c9-48ac-92be-fa8b96fcc5cd" width="500" style="display:inline-block; margin-left:5px;" />
      
    - Displays easy-to-follow driving directions from one point to another
      <img src="https://github.com/user-attachments/assets/d6fd492b-8fd6-4259-b9c9-7a966821fef4" width="500"/>

    - Map scale included for spatial reference
- **Milestone 3 & 4: Path Finding and Courier Optimization**
  - Implemented efficient routing features in GPSafety, allowing users to plan routes in two intuitive ways: either by using the search bars or by clicking directly on two intersections on the map.
  - A multi-destination Dijkstra‚Äôs algorithm is used to calculate the shortest paths and travel times from a single source to multiple destinations. This algorithm leverages a priority queue and includes turn penalties for more realistic routing across street segments.
  - The project also solves a complex variant of the NP-Hard Traveling Salesman Problem (TSP) known as the Traveling Courier Problem, which involves multiple depots, pickups, and drop-offs. To handle this efficiently:
    - Preprocessing is performed to compute travel time and path matrices between all relevant intersections (depots, pickups, and drop-offs) using the multi-destination Dijkstra algorithm.
    - A feasible initial solution is constructed by placing pickups before their associated drop-offs.
    - The route is then optimized using a Simulated Annealing metaheuristic:
      - Neighboring solutions are generated by randomly swapping or reversing segments of the route.
      - A new neighbor is accepted probabilistically based on the cost difference and the current temperature, gradually reducing the chance of accepting worse solutions as the temperature cools.
    - The best route from Simulated Annealing is further improved with a Two-Opt optimization routine, which reduces detours and smooths out inefficient connections.
  - Together, these techniques power a robust and optimized routing system tailored for real-world courier scenarios involving complex constraints and time-sensitive deliveries.

## üö® Safety Alerts
GPSafety is designed with user safety as a top priority, offering several features to help users stay aware and make informed decisions:
- **Real-time crime alerts** are pulled hourly from the TPSCalls API and displayed as hotspot overlays directly on the map, highlighting areas with recent activity.
    <img src="https://github.com/user-attachments/assets/f7eae640-cf56-41fc-a406-c2de55b06bdf" width="500"/>
  
- A **safety toggle button** allows users to turn hotspot visibility on or off, giving them control over when they want to view crime data.
  
  <img src="https://github.com/user-attachments/assets/98998115-1816-45fb-8ee8-81447bd7191f" width="500"/>
  
- **Interactive crime icons** let users click for detailed information about individual incidents, including the type of crime, date, time, location, and data source.
  <img src="https://github.com/user-attachments/assets/93e94ebb-c9cf-4ad9-92b5-0e99ce584a68" width="500"/>
  
- The Points of Interest (POI) menu includes a dedicated **Health & Emergency** category, making it easy to locate nearby hospitals, police stations, fire departments, pharmacies etc.
  <img src="https://github.com/user-attachments/assets/62b28054-f552-4a82-9ecd-145bbb0a25dc" width="500"/>
  
- When users click on or near any intersection, the system automatically displays the nearest pharmacy
  - Chosen because pharmacies are more widely distributed across the city than other emergency services, ensuring more consistent access to a nearby safety location.

  <img src="https://github.com/user-attachments/assets/ad945d20-f9db-4f7b-9435-209757d7f591" width="500"/>

## ‚öíÔ∏è Future Development
- **Live Route Sharing**
  - Allow users to share their active path with friends/family in real-time.
- **Global Crime Integration**
  - Expand safety feature beyond Toronto to other cities.
